version: "3.9"

services:
  trip-splitter:
    build:
      context: .
      dockerfile: Dockerfile
    image: trip-splitter:latest
    environment:
      PORT: "${PORT:-8000}"
    command: >
      uvicorn app:app
      --host 0.0.0.0
      --port ${PORT:-8000}
    ports:
      - "${PORT:-8000}:${PORT:-8000}"
    volumes:
      - ./data:/app/data
      - ./uploads:/app/uploads
    restart: unless-stopped
